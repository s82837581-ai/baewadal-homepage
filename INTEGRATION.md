# ëª¨ë””íŠ¸ ì•± â†” ê³µê°œ íŽ˜ì´ì§€ ì—°ë™ ê°€ì´ë“œ

## ðŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ëª¨ë””íŠ¸ ìƒíƒœê³„                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ ëª¨ë””íŠ¸ ì•±     â”‚        â”‚ ê³µê°œ íŽ˜ì´ì§€   â”‚                   â”‚
â”‚  â”‚ (Figma Make) â”‚        â”‚ (GitHub)     â”‚                   â”‚
â”‚  â”‚              â”‚        â”‚              â”‚                   â”‚
â”‚  â”‚ - ê°€ê²©í‘œ ë“±ë¡ â”‚        â”‚ - QR ìŠ¤ìº”    â”‚                   â”‚
â”‚  â”‚ - QR ìƒì„±    â”‚        â”‚ - ê°€ê²©í‘œ í‘œì‹œ â”‚                   â”‚
â”‚  â”‚ - ì œë³´ ì¡°íšŒ  â”‚        â”‚ - ê³ ê° ì œë³´  â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚         â”‚                       â”‚                            â”‚
â”‚         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚         â”‚    â”‚                                    â”‚          â”‚
â”‚         â””â”€â”€â”€â”€â”¼â”€â”€â”€â”€> Supabase API <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚              â”‚                                               â”‚
â”‚              â”‚  - Edge Functions (make-server)              â”‚
â”‚              â”‚  - KV Store (ê°€ê²©í‘œ ë°ì´í„°)                  â”‚
â”‚              â”‚  - Customer Reports (ì œë³´ ë°ì´í„°)            â”‚
â”‚              â”‚  - Auth (ì¸ì¦, ì•± ì „ìš©)                      â”‚
â”‚              â”‚                                               â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ“¡ API ì—°ë™

### 1. ê°€ê²©í‘œ ì¡°íšŒ (ê³µê°œ API)

**ì—”ë“œí¬ì¸íŠ¸**: `GET /v2/price-list/public/{priceListId}`

**ì¸ì¦**: ë¶ˆí•„ìš” (ê³µê°œ API)

**ì‚¬ìš©ì²˜**:
- ëª¨ë””íŠ¸ ì•±: ë‚´ë¶€ í…ŒìŠ¤íŠ¸ìš©
- ê³µê°œ íŽ˜ì´ì§€: QR ìŠ¤ìº” ì‹œ ê°€ê²©í‘œ í‘œì‹œ

**ì‘ë‹µ ì˜ˆì‹œ**:
```json
{
  "success": true,
  "priceList": {
    "id": "price_user123",
    "storeName": "ê¹€ë°¥ì²œêµ­ ì¢…ë¡œì ",
    "items": [
      {
        "name": "ê¹€ë°¥",
        "price": 3000,
        "unit": "ì¤„",
        "description": "ì•¼ì±„ê¹€ë°¥"
      }
    ],
    "updatedAt": "2025-01-15T10:30:00Z"
  },
  "viewCount": 42
}
```

### 2. ê³ ê° ì œë³´ (ê³µê°œ API)

**ì—”ë“œí¬ì¸íŠ¸**: `POST /v2/customer-reports`

**ì¸ì¦**: ë¶ˆí•„ìš” (ê³µê°œ API)

**ì‚¬ìš©ì²˜**:
- ëª¨ë””íŠ¸ ì•±: ì œë³´ ì¡°íšŒ/ê´€ë¦¬ (ì¸ì¦ í•„ìš”)
- ê³µê°œ íŽ˜ì´ì§€: ê³ ê°ì´ ì œë³´ ë“±ë¡

**ìš”ì²­ ì˜ˆì‹œ**:
```json
{
  "priceListId": "price_user123",
  "storeName": "ê¹€ë°¥ì²œêµ­ ì¢…ë¡œì ",
  "reportType": "price_diff",
  "itemName": "ê¹€ë°¥",
  "description": "ë©”ë‰´íŒ 3,000ì›ì¸ë° 3,500ì› ë°›ìŒ",
  "reporterName": "í™ê¸¸ë™",
  "reporterContact": "010-1234-5678",
  "timestamp": "2025-01-15T14:20:00Z",
  "source": "public_qr_page"
}
```

### 3. ê°€ê²©í‘œ ë“±ë¡/ìˆ˜ì • (ì¸ì¦ í•„ìš”)

**ì—”ë“œí¬ì¸íŠ¸**: `POST /v2/price-list`

**ì¸ì¦**: í•„ìš” (ëª¨ë””íŠ¸ ì•± ì „ìš©)

**ì‚¬ìš©ì²˜**:
- ëª¨ë””íŠ¸ ì•±: ìƒì¸ì´ ê°€ê²©í‘œ ë“±ë¡/ìˆ˜ì •

## ðŸ”— URL ë¼ìš°íŒ…

### ëª¨ë””íŠ¸ ì•± (ê°œë°œ/í…ŒìŠ¤íŠ¸)

```
https://your-app.figma.com/#/p/{priceListId}
```

- í•´ì‹œ ë¼ìš°íŒ… ì‚¬ìš©
- ì•± ë‚´ë¶€ì—ì„œ `PublicQRView` ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
- ì¸ì¦ ë¶ˆí•„ìš”

### ê³µê°œ íŽ˜ì´ì§€ (í”„ë¡œë•ì…˜)

```
https://baewadal.co.kr/p/?id={priceListId}
```

- ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì‚¬ìš©
- ë…ë¦½ì ì¸ ì •ì  HTML íŽ˜ì´ì§€
- GitHub Pages í˜¸ìŠ¤íŒ…

### URL ìžë™ ì„ íƒ ë¡œì§

```typescript
// /utils/qrUrlGenerator.ts
export function generatePublicQRUrl(priceListId: string): string {
  const isProduction = window.location.hostname === 'baewadal.co.kr';
  
  if (isProduction) {
    // í”„ë¡œë•ì…˜: ì •ì  íŽ˜ì´ì§€
    return `https://baewadal.co.kr/p/?id=${priceListId}`;
  } else {
    // ê°œë°œ: ì•± ë‚´ë¶€ ë¼ìš°íŒ…
    return `${window.location.origin}#/p/${priceListId}`;
  }
}
```

## ðŸš€ ë°°í¬ í”„ë¡œì„¸ìŠ¤

### 1. ëª¨ë””íŠ¸ ì•± ë°°í¬ (Figma Make)

```bash
# ìžë™ ë°°í¬ (Figma Makeê°€ ì²˜ë¦¬)
# ë³€ê²½ì‚¬í•­ ì €ìž¥ ì‹œ ìžë™ ë°˜ì˜
```

### 2. ê³µê°œ íŽ˜ì´ì§€ ë°°í¬ (GitHub Pages)

```bash
# ì €ìž¥ì†Œ í´ë¡ 
git clone https://github.com/{username}/baewadal-public.git
cd baewadal-public

# public-pages í´ë” ë‚´ìš© ë³µì‚¬
cp -r /path/to/modit/public-pages/* .

# ì»¤ë°‹ ë° í‘¸ì‹œ
git add .
git commit -m "Update public price list page"
git push origin main

# GitHub Pagesê°€ ìžë™ ë°°í¬ (1-2ë¶„ ì†Œìš”)
```

### 3. Supabase í•¨ìˆ˜ ë°°í¬

```bash
# Edge FunctionsëŠ” ì´ë¯¸ ë°°í¬ë¨
# ë³€ê²½ì‚¬í•­ì´ ìžˆì„ ê²½ìš°:
supabase functions deploy make-server
```

## ðŸ”§ í™˜ê²½ ì„¤ì •

### ê³µê°œ íŽ˜ì´ì§€ (script.js)

```javascript
const CONFIG = {
  SUPABASE_URL: 'https://viwzvfkqmrzmrrqfjxld.supabase.co',
  SUPABASE_ANON_KEY: 'eyJhbGc...',  // ê³µê°œ í‚¤
  API_BASE_PATH: '/functions/v1/make-server-f49b8637'
};
```

### ëª¨ë””íŠ¸ ì•± (utils/supabase/info.tsx)

```typescript
export const projectId = 'viwzvfkqmrzmrrqfjxld';
export const publicAnonKey = 'eyJhbGc...';  // ë™ì¼í•œ ê³µê°œ í‚¤
```

## ðŸ“Š ë°ì´í„° íë¦„

### ê°€ê²©í‘œ ë“±ë¡ í”Œë¡œìš°

```
1. ìƒì¸ì´ ëª¨ë””íŠ¸ ì•±ì—ì„œ ê°€ê²©í‘œ ë“±ë¡
   â†“
2. POST /v2/price-list (ì¸ì¦ í•„ìš”)
   â†“
3. Supabase KV Storeì— ì €ìž¥
   â†“
4. QR ì½”ë“œ ìƒì„±
   - ê°œë°œ: {ì•±URL}#/p/{priceListId}
   - í”„ë¡œë•ì…˜: https://baewadal.co.kr/p/?id={priceListId}
   â†“
5. QR ì¶œë ¥/ê³µìœ 
```

### ê³ ê° ì¡°íšŒ í”Œë¡œìš°

```
1. ê³ ê°ì´ QR ìŠ¤ìº”
   â†“
2. https://baewadal.co.kr/p/?id={priceListId} ì ‘ì†
   â†“
3. GET /v2/price-list/public/{priceListId}
   â†“
4. Supabase KV Storeì—ì„œ ì¡°íšŒ
   â†“
5. ê°€ê²©í‘œ í‘œì‹œ + ì¡°íšŒìˆ˜ ì¦ê°€
```

### ê³ ê° ì œë³´ í”Œë¡œìš°

```
1. ê³ ê°ì´ "ì‹ ê³ í•˜ê¸°" ë²„íŠ¼ í´ë¦­
   â†“
2. ì œë³´ ì–‘ì‹ ìž‘ì„±
   â†“
3. POST /v2/customer-reports
   â†“
4. Supabase KV Storeì— ì €ìž¥
   â†“
5. ìƒì¸ì´ ëª¨ë””íŠ¸ ì•±ì—ì„œ ì œë³´ í™•ì¸
```

## ðŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### ê³µê°œ API
- ê°€ê²©í‘œ ì¡°íšŒ: ì½ê¸° ì „ìš©, ëˆ„êµ¬ë‚˜ ì ‘ê·¼ ê°€ëŠ¥
- ê³ ê° ì œë³´: ì“°ê¸°ë§Œ ê°€ëŠ¥, ëª©ë¡ ì¡°íšŒ ë¶ˆê°€

### ì¸ì¦ API
- ê°€ê²©í‘œ ë“±ë¡/ìˆ˜ì •: JWT í† í° í•„ìš”
- ì œë³´ ì¡°íšŒ/ê´€ë¦¬: í•´ë‹¹ ìƒì  ì†Œìœ ìž ë˜ëŠ” ë§ˆìŠ¤í„°ë§Œ ê°€ëŠ¥

### Rate Limiting
- Supabase Edge Functions ìžì²´ Rate Limit ì ìš©
- ê³¼ë„í•œ ìš”ì²­ ë°©ì§€

## ðŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. ë¡œì»¬ í…ŒìŠ¤íŠ¸ (ê³µê°œ íŽ˜ì´ì§€)

```bash
cd public-pages
python3 -m http.server 8000

# ë¸Œë¼ìš°ì €ì—ì„œ
http://localhost:8000/?id=price_test123
```

### 2. í”„ë¡œë•ì…˜ í…ŒìŠ¤íŠ¸

```bash
# ëª¨ë””íŠ¸ ì•±ì—ì„œ QR ìƒì„±
# QR ìŠ¤ìº” ë˜ëŠ” URL ì§ì ‘ ì ‘ì†
https://baewadal.co.kr/p/?id={ì‹¤ì œpriceListId}
```

### 3. API ì§ì ‘ í…ŒìŠ¤íŠ¸

```bash
# ê°€ê²©í‘œ ì¡°íšŒ
curl -X GET \
  "https://viwzvfkqmrzmrrqfjxld.supabase.co/functions/v1/make-server-f49b8637/v2/price-list/public/price_test123" \
  -H "Authorization: Bearer {ANON_KEY}"

# ê³ ê° ì œë³´
curl -X POST \
  "https://viwzvfkqmrzmrrqfjxld.supabase.co/functions/v1/make-server-f49b8637/v2/customer-reports" \
  -H "Authorization: Bearer {ANON_KEY}" \
  -H "Content-Type: application/json" \
  -d '{
    "priceListId": "price_test123",
    "reportType": "price_diff",
    "description": "í…ŒìŠ¤íŠ¸ ì œë³´"
  }'
```

## ðŸ“± ëª¨ë°”ì¼ ìµœì í™”

### ê³µê°œ íŽ˜ì´ì§€
- ë°˜ì‘í˜• ë””ìžì¸ (ëª¨ë°”ì¼ ìš°ì„ )
- í„°ì¹˜ ì¹œí™”ì  ë²„íŠ¼ í¬ê¸°
- ë¹ ë¥¸ ë¡œë”© (ìˆœìˆ˜ HTML/CSS/JS)

### QR ì½”ë“œ ìŠ¤ìº”
- iOS: ê¸°ë³¸ ì¹´ë©”ë¼ ì•± ì§€ì›
- Android: Google Lens, ê¸°ë³¸ ì¹´ë©”ë¼ ì•± ì§€ì›
- ë¸Œë¼ìš°ì €: WebRTC ê¸°ë°˜ QR ìŠ¤ìº” (ì„ íƒì )

## ðŸŒ ë‹¤êµ­ì–´ ì§€ì›

### ì§€ì› ì–¸ì–´
- ðŸ‡°ðŸ‡· í•œêµ­ì–´ (ê¸°ë³¸)
- ðŸ‡ºðŸ‡¸ English
- ðŸ‡¨ðŸ‡³ ä¸­æ–‡ (ì¤‘êµ­ì–´ ê°„ì²´)
- ðŸ‡¯ðŸ‡µ æ—¥æœ¬èªž (ì¼ë³¸ì–´)

### êµ¬í˜„ ë°©ì‹
- í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë²ˆì—­ (script.jsì˜ translations ê°ì²´)
- URL íŒŒë¼ë¯¸í„°ë¡œ ì–¸ì–´ ì €ìž¥ ê°€ëŠ¥ (`?id=xxx&lang=en`)

## ðŸ†˜ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ê°€ê²©í‘œê°€ í‘œì‹œë˜ì§€ ì•ŠìŒ
1. priceListId í™•ì¸
2. ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ API ì‘ë‹µ í™•ì¸
3. Supabase ëŒ€ì‹œë³´ë“œì—ì„œ ë°ì´í„° ì¡´ìž¬ í™•ì¸

### QR ì½”ë“œê°€ ìž˜ëª»ëœ URL ìƒì„±
1. `/utils/qrUrlGenerator.ts` í™•ì¸
2. í™˜ê²½ ë³€ìˆ˜ í™•ì¸ (isProduction)
3. QR ë‹¤ì‹œ ìƒì„±

### ê³ ê° ì œë³´ê°€ ì €ìž¥ë˜ì§€ ì•ŠìŒ
1. API ì—”ë“œí¬ì¸íŠ¸ í™•ì¸
2. í•„ìˆ˜ í•„ë“œ í™•ì¸ (reportType, description)
3. Supabase ë¡œê·¸ í™•ì¸

## ðŸ“ž ë¬¸ì˜

- ê°œë°œ ë¬¸ì˜: baewadal@baewadal.co.kr
- ì‹œìŠ¤í…œ ê´€ë¦¬: ë§ˆìŠ¤í„° ê³„ì • (01082837581)

---

Â© 2025 Baewadal. All rights reserved.
